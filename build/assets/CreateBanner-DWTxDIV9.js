import{u as x,q as h,y as g,r as d,j as a,B as r}from"./index-BNbvoI4x.js";import{B as b}from"./BackButton-UXgg5BkK.js";import{g as j,p as y,a as B}from"./Api-Da68FMlE.js";import{B as w}from"./button-CpUg40Ua.js";import"./iconBase-BrTl3Xj6.js";const D=()=>{const m=x(),u=h(),{id:n}=g(),{createBanner:c}=m.state||{},[i,l]=d.useState(null);d.useEffect(()=>{n&&(async()=>{var t;try{const e=await j(`banners/${n}`);l((t=e==null?void 0:e.data)==null?void 0:t.image)}catch{r.error("Failed to fetch banner")}})()},[n]);const f=o=>{const t=o.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{l(e.result)},e.readAsDataURL(t)}},p=async o=>{var t;if(o.preventDefault(),!i){r.error("Image is required");return}try{const e=new FormData;e.append("image",i);const s=c==="add"?await y("banners",e):await B(`banners/${n}`,e);s.status===201||s.status===200?(r.success((t=s==null?void 0:s.data)==null?void 0:t.message),u("/banner")):r.error("Something went wrong!!")}catch(e){console.error("Login error",e),r.error("An error occurred while creating the banner")}};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("p",{className:"font-semibold text-[24px] text-gray-500",children:"Banners"}),a.jsx(b,{})]}),a.jsxs("div",{className:"bg-white py-10 px-4",children:[a.jsxs("p",{className:"font-bold text-2xl text-black",children:["Banner ",c==="add"?"Create":"Update"]}),a.jsx("p",{className:"text-base text-gray-500 font-semibold",children:"Image"}),a.jsx("input",{onChange:f,type:"file",className:"w-full border-2 py-2"}),a.jsx("div",{className:"my-4",children:a.jsx(w,{onClick:p,children:c==="add"?"Create":"Update"})})]})]})};export{D as default};
